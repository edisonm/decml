#include <stdint.h>

/* Helper: compute 10^n for n <= 19 */
const uint64_t __pow10_dec64[] = {
    1ULL,                    // 10^0
    10ULL,                   // 10^1
    100ULL,                  // 10^2
    1000ULL,                 // 10^3
    10000ULL,                // 10^4
    100000ULL,               // 10^5
    1000000ULL,              // 10^6
    10000000ULL,             // 10^7
    100000000ULL,            // 10^8
    1000000000ULL,           // 10^9
    10000000000ULL,          // 10^10
    100000000000ULL,         // 10^11
    1000000000000ULL,        // 10^12
    10000000000000ULL,       // 10^13
    100000000000000ULL,      // 10^14
    1000000000000000ULL,     // 10^15
    10000000000000000ULL,    // 10^16
    100000000000000000ULL,   // 10^17
    1000000000000000000ULL,  // 10^18
    10000000000000000000ULL, // 10^19
};

/* Helper: compute 10^n for n <= 38 in __uint128_t */
const __uint128_t __pow10_dec128[] = {
    (__uint128_t)1ULL,                                    // 10^0
    (__uint128_t)10ULL,                                   // 10^1
    (__uint128_t)100ULL,                                  // 10^2
    (__uint128_t)1000ULL,                                 // 10^3
    (__uint128_t)10000ULL,                                // 10^4
    (__uint128_t)100000ULL,                               // 10^5
    (__uint128_t)1000000ULL,                              // 10^6
    (__uint128_t)10000000ULL,                             // 10^7
    (__uint128_t)100000000ULL,                            // 10^8
    (__uint128_t)1000000000ULL,                           // 10^9
    (__uint128_t)10000000000ULL,                          // 10^10
    (__uint128_t)100000000000ULL,                         // 10^11
    (__uint128_t)1000000000000ULL,                        // 10^12
    (__uint128_t)10000000000000ULL,                       // 10^13
    (__uint128_t)100000000000000ULL,                      // 10^14
    (__uint128_t)1000000000000000ULL,                     // 10^15
    (__uint128_t)10000000000000000ULL,                    // 10^16
    (__uint128_t)100000000000000000ULL,                   // 10^17
    (__uint128_t)1000000000000000000ULL,                  // 10^18
    (__uint128_t)10000000000000000000ULL,                 // 10^19
    ((__uint128_t)10000000000000000000ULL * 10ULL),       // 10^20
    ((__uint128_t)10000000000000000000ULL * 100ULL),      // 10^21
    ((__uint128_t)10000000000000000000ULL * 1000ULL),     // 10^22
    ((__uint128_t)10000000000000000000ULL * 10000ULL),    // 10^23
    ((__uint128_t)10000000000000000000ULL * 100000ULL),   // 10^24
    ((__uint128_t)10000000000000000000ULL * 1000000ULL),  // 10^25
    ((__uint128_t)10000000000000000000ULL * 10000000ULL), // 10^26
    ((__uint128_t)10000000000000000000ULL * 100000000ULL),// 10^27
    ((__uint128_t)10000000000000000000ULL * 1000000000ULL),//10^28
    ((__uint128_t)10000000000000000000ULL * 10000000000ULL),//10^29
    ((__uint128_t)10000000000000000000ULL * 100000000000ULL),//10^30
    ((__uint128_t)10000000000000000000ULL * 1000000000000ULL),//10^31
    ((__uint128_t)10000000000000000000ULL * 10000000000000ULL),//10^32
    ((__uint128_t)10000000000000000000ULL * 100000000000000ULL),//10^33
    ((__uint128_t)10000000000000000000ULL * 1000000000000000ULL),//10^34
    ((__uint128_t)10000000000000000000ULL * 10000000000000000ULL),//10^35
    ((__uint128_t)10000000000000000000ULL * 100000000000000000ULL),//10^36
    ((__uint128_t)10000000000000000000ULL * 1000000000000000000ULL),//10^37
    ((__uint128_t)10000000000000000000ULL * 10000000000000000000ULL)//10^38
};

const char dec_sign[] = {' ','-'};

const char *dec_special[] = {"", "(NAN)", "(INF)"};

/* Helper: integer factorial using uint64_t, up to 19! (fits safely) */
uint64_t factorial(int n) {
    uint64_t r = 1;
    for (int i = 2; i <= n; ++i) r *= i;
    return r;
}
