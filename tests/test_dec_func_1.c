#include <stdio.h>
#include <string.h>
#include "dec64.h"
#include "dec128.h"
#include "test_dec.h"

int main(void) {
    int failed = 0;

    tests_1_t tests_1_exp10m1[] = {
        {"1", "9"},
        {"10", "9999999999"},
        {"-10", "-0.9999999999"},
        {"100", "1e100"},
        {"-20", "-0.99999999999999999999"},
        {"-100", "-1"},
        {"-100e100", "-1"},
        {"1e-10", "2.30258509325914058956225814113655354415e-10"},
        {"3.33333333333333333333333333333333333333e-15",
         "7.6752836433135150683828075067899645009e-15"},
        {"1e-20", "2.3025850929940456840179914546843642076e-20"},
        {"1e-30", "2.3025850929940456840179914546843642076e-30"},
        {"0.95", "7.9125093813374552995310868107829696399"},
        {"0.10", "0.258925411794167210423954106395800606094"},
        {"0.15", "0.41253754462275430215560786393024092978"},
        {"-0.15", "-0.29205421561586208919778505781068729064"},
        {"0.015", "0.035142166679343817275623473454318273716"},
        {"0.333333333333333333333333333333333333333", "1.15443469003188372175929356651935049524"}
    };
    
    tests_1_t tests_1_log10[] = {
        {"2",     "0.301029995663981195213738894724493026768"},
        {"0.5",  "-0.30102999566398119521373889472449302677"},
        {"20",    "1.30102999566398119521373889472449302677"},
        {"200",   "2.30102999566398119521373889472449302677"},
        {"2000",  "3.30102999566398119521373889472449302677"},
        {"20000", "4.3010299956639811952137388947244930268"},
        {"1e100",   "100"},
        {"1e-100", "-100"},
        {"1.84e100", "100.26481782300953646450899379642466863"},
        {"3", "0.4771212547196624372950279032551153092"},
        { "0", "-inf"},
        {"-1", "nan"}
    };
    
    tests_1_t tests_1_atan[] = {
        {"0",        "0"}, // a(0.1)
        {"0.1",      "0.09966865249116202737844611987802059024"}, // a(0.1)
        {"0.01",     "0.0099996666866652382063401162092795485601"},
        {"0.001",    "0.00099999966666686666652380963492054401163"},
        {"0.0001",   "0.000099999999666666668666666652380952492064"},
        {"0.00001",  "0.0000099999999996666666666866666666652380954"},
        {"0.000001", "9.9999999999966666666666686666666666654e-7"},
        {"1",        "0.78539816339744830961566084581987572105"}, // a(1)
        {"-1",      "-0.78539816339744830961566084581987572105"}, // a(-1)
        {"1.000001", "0.7853986633971983096989941791531840544"},
        {"0.999999", "0.78539766339719830953232751248656738772"},
        {"1.732050807568877293527446341505872",  "1.0471975511965977461542144610931675363"},
        {"100000000000000000", "1.57079632679489660923132169163975144205"},
        {"1e100",              "1.57079632679489661923132169163975144209"},
        { "1e-100",  "1e-100"},
        {"-1e-100", "-1e-100"}
    };

    tests_1_t tests_1_acos[] = {
        {"1",        "0"},
        {"0.1",      "1.47062890563333682288579851218705812344"},
        {"0.01",     "1.56079616012072950610569941456776105834"},
        {"0.001",    "1.56979632662822987756461038208555995144"},
        {"0.0001",   "1.57069632679472995256390502496862048964"},
        {"0.00001",  "1.57078632679489645256465501747308477494"},
        {"0.000001", "1.5707953267948966190646550249730097754"},
        {"0",        "1.5707963267948966192313216916397514421"},
        {"-0.9",     "2.6905658417935308059179987474851510579"},
        {"-1",       "3.1415926535897932384626433832795028842"},
        {"-0.1",     "1.67096374795645641557684487109244476068"},
        {"2",        "nan"}
    };
    
    tests_1_t tests_1_asin[] = {
        {"1",        "1.5707963267948966192313216916397514421"},
        {"0.1",      "0.10016742116155979634552317945269331856"},
        {"0.01",     "0.010000166674167113125622277071990383678"},
        {"0.001",    "0.00100000016666674166671130955419149062614"},
        {"0.0001",   "0.000100000000166666667416666671130952411332"},
        {"0.00001",  "0.0000100000000001666666666741666666671130952"},
        {"0.000001", "0.0000010000000000001666666666667416666666667"},
        {"0",        "0"},
        {"-0.9",     "-1.11976951499863418668667705584539961584"},
        {"-1",       "-1.5707963267948966192313216916397514421"},
        {"-0.1",     "-0.10016742116155979634552317945269331856"},
        {"2",        "nan"}
    };

    tests_1_t tests_1_sqrt[] = {
        {"0", "0"},
        {"1", "1"},
        {"4", "2"},
        {"2", "1.4142135623730950488016887242096980786"},
        {"3", "1.7320508075688772935274463415058723669"},
        {"123.21", "11.1"},
        {"8100000000000000", "90000000"}, // big exact
        {"8112963841460666", "90071992.547409907956417754539869851849"}, // approximate
        {"8112963841460667", "90071992.54740991350753287766565312515"}, // approximate
        {"999999999999999",  "31622776.601683777508600634602426572496"}, // approximate
        {"-1", "nan"} // nan expected
    };
    
    RUN_TESTS_1(tests_1, exp10m1);
    RUN_TESTS_1(tests_1, log10);
    RUN_TESTS_1(tests_1, atan);
    RUN_TESTS_1(tests_1, acos);
    RUN_TESTS_1(tests_1, asin);
    RUN_TESTS_1(tests_1, sqrt);
    
    report_failed(failed);

    return failed != 0;
}
