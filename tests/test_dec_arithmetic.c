#include <stdio.h>
#include <string.h>
#include "dec64.h"
#include "dec128.h"
#include "test_dec.h"
#include "test_dec64.h"
#include "test_dec128.h"

int main() {
    int failed = 0;

    tests_2_t tests_2_add[] = {
        {"1", "0", "1"},
        {"1e0", "301029995663981195213738894724493026768e-39",
         "1.30102999566398119521373889472449302677"},
        {"3e0", "301029995663981195213738894724493026768e-39",
         "3.30102999566398119521373889472449302677"},
        {"1", "0", "1"}, // subtraction 1 + 0 = 1
        {"123.45", "67.89", "191.34"}, // addition 123.45 + 67.89 = 191.34
        {"0.09590083957724163", "0.09590083957724163", "0.19180167915448326"}
    };
    
    tests_2_t tests_2_sub [] = {
        {"1000", "1", "999"}, // subtraction 1000 - 1 = 999
        {"-0.866025403784439", "-1.154700538379251", "0.288675134594812"}
    };
    
    tests_2_t tests_2_mul [] = {
        {"12", "3.5", "42"}, // multiplication 12 * 3.5 = 42
        {"18446744073709551615", "18446744073709551615", "340282366920938463426481119284349108225"},
        {"1.8e100", "1.8e100", "3.24e200"}
    };
    
    tests_2_t tests_2_div [] = {
        {"40404040404040404040404040404040404040e-38",
         "95918783797571676359555147433935312724e-38",
         "0.42123178385278161897670460589299010742"},
        {"2e0",
         "-249999999999999999999999999999999475000e-22",
         "-8.0000000000000000000000000000000168e-17"},
        { "1", "-200000000000000000000000000000000020000e-55", "-49999999999999999.999999999999999995"},
        { "1",  "1", "1"},
        { "1", "81", "0.0123456790123456790123456790123456790123456790123"},
        {"10",  "4", "2.5"}, // division 10 / 4 = 2.5
        { "1",  "0", "inf"}, // division by zero
        {"-1",  "0", "-inf"}, // division by zero
        { "0",  "0", "nan"} // division by zero
    };
    
    test_2i_t tests_2i_powi[] = {
        { "2", 10, "1024"}, // 2^10 = 1024
        { "2", 20, "1048576"}, // 2^20 = 1048576
        { "5", -3, "0.008"}, // 5^-3 = 0.008
        {"10", 0, "1"}, // 10^0 = 1
        { "0", 3, "0"}, // 0^3 = 0
        {"1.84", __pow10_dec128[3], "6.5738987297836705921477041761654262855e264"} // 2^1 0 = 1024
    };
    
    RUN_TESTS_2(tests_2, add);
    RUN_TESTS_2(tests_2, sub);
    RUN_TESTS_2(tests_2, mul);
    RUN_TESTS_2(tests_2, div);
    RUN_TESTS_2i(tests_2i, powi);
    
    report_failed(failed);
    
    return failed != 0;
}
